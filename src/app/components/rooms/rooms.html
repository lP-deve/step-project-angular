<div class="category-tabs">
  <button [class.active]="draftType === 'All'" (click)="selectCategory('All')">All</button>
  @for (type of allRooms.roomTypes(); track type.id) {
  <button [class.active]="draftType === type.id" (click)="selectCategory(type.id)">{{ type.name }}</button>
  }
</div>

<div class="filters-card">
  <div class="filters-row">

    <div class="filter-groupprice-group">
      <label class="mat-label-sub">Price Per Night</label>
      <div class="range-container">
        <mat-slider [min]="sliderMin" [max]="sliderMax" step="1">
          <input matSliderStartThumb [(ngModel)]="draftMin">
          <input matSliderEndThumb [(ngModel)]="draftMax">
        </mat-slider>
      </div>
      <div class="price-inputs">
        <input type="text" [value]="draftMin" readonly>
        <input type="text" [value]="draftMax" readonly>
      </div>
    </div>

    <mat-form-field appearance="outline" class="filter-item">
      <mat-label>Room Type</mat-label>
      <mat-select [(ngModel)]="draftType">
        <mat-option [value]="'All'">All Types</mat-option>
        @for (type of allRooms.roomTypes(); track type.id) {
          <mat-option [value]="type.id">{{ type.name }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="filter-item">
      <mat-label>Check-in</mat-label>
      <input id="data" matInput [matDatepicker]="picker" [(ngModel)]="draftCheckIn">
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline" class="filter-item">
      <mat-label>Check-out</mat-label>
      <input id="data" matInput [matDatepicker]="checkOutPicker" [(ngModel)]="draftCheckOut">
      <mat-datepicker-toggle matIconSuffix [for]="checkOutPicker"></mat-datepicker-toggle>
      <mat-datepicker #checkOutPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline" class="filter-item">
      <mat-label>Guests</mat-label>
      <input matInput type="number" [(ngModel)]="draftGuests" placeholder="2">
    </mat-form-field>

    <div class="filter-actions">
      <button class="apply-btn" (click)="applyFilters()">APPLY FILTER</button>
      <button class="reset-btn" (click)="resetFilters()">RESET</button>
    </div>

  </div>
</div>

<hr />

<div class="rooms-container">
  @if (isLoading()) {
    <div class="loader-container">
      <div class="spinner"></div>
      <p>Finding your perfect room...</p>
    </div>
  } @else {
    <div class="rooms-grid">
      @for (room of allRooms.rooms(); track room.id) {
        <div class="cont" [routerLink]="['/room', room.id]">
          <div class="image-wrapper">
            @if (room.images?.length) {
              <img [src]="allRooms.fullImage(room.images)" [alt]="room.name" class="room-image" />
            }
          </div>
          <div class="content">
            <div class="info">
              <h3>{{ room.name }}</h3>
              <div class="price">
                <p>&euro; {{ room.pricePerNight }}</p>
                <p>a night</p>
              </div>
            </div>
            <button class="book-btn">Book now</button>
          </div>
        </div>
      }
    </div>
  }
</div>